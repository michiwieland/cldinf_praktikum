\input{../template.tex}

% Dokumentinformationen
\newcommand{\SUBJECT}{Report}
\newcommand{\TITLE}{Cloud Infrastructre Lab 2}

\input{../front.tex}

% 06.10.2016, 23:55, as PDF to beat.stettler@ins.hsr.ch

\section{Aufgabenstellung}
\subsection{Einleitung}
Gemäss der Aufgabenstellung

\begin{quotation}
	The fictional company BetaHouse Inc. is specialized in the high-frequency trading sector. In this exercise you will design the LAN part of the network, based on customer specifications. Part two will focus on the WAN integration with several remote locations throughout Switzerland (10+).
	
	Start with analyzing and characterizing the desired goals. Then go ahead with a logical network design. Based on that define the physical network. Document, review and change if needed until you get a satisfying solution. 
	
	\textbf{It’s important to describe your design decisions in your documentation.}
\end{quotation}

\subsection{Angaben zur Firma}

\begin{description}
	\item[Firmenname] BetaHouse Inc.
	\item[Niederlassungen] 10+, verbunden über WAN
\end{description}

\includepdf[pages={1},landscape=true]{appendix/schemes/lan_logical.pdf}

\subsection{Vorgehen}
\begin{enumerate}
	\item Analyse der Kundenansprüche
	\item Designentscheidungen ausformulieren
	\item Aufbau des Campus LAN Design
	\item Aufbau des Adressierungs- \& Namensschema
	\item Analysieren Nutzung von Cloud Diensten
\end{enumerate}

\section{LAN Design Headquarter}

\subsection{Kundenansprüche an das Netzwerk}

\subsubsection{Ansprüche Verfügbarkeit / Redundanz }
Da die Firma im Highspeed-Finanztrading arbeitet, ist eine zuverlässige Anbindung in und an die Firmeninfrastruktur essenziell. Besonders kommt dies bei der Trading-Abteilung zum tragen: Diese muss mit sehr grossen Beträgen in kurzer Zeit, ohne Unterbrüche handeln können. Deshalb sollte die Trading-Abteilung zusätzlich Redundant angeschlossen werden.

Grundsätzlich sind für die meisten Mitarbeiter eine Verfügbarkeit von ca. 99.99\% ausreichend, für die Trading-Abteilung sollte eine Verfügbarkeit von 99.999\% angestrebt werden.

Um diese Zahlen zu erreichen, müssen nahezu alle Geräte redundant ausgelegt sein (eine Doppelredundanz wird angestrebt; eine Dreifachredundanz würden Komplexität und Kosten zu stark erhöhen). Zudem müssen in der IT-Abteilung Strikte Verfahren festgelegt werden, welche die Konfiguration des Netzwerkes nur noch nach dem Vieraugenprinzip erlaubt. Damit wird die Fehlerwahrscheinlichkeit gesenkt.

\subsubsection{Datenfluss Netzwerk}

Der meiste Datenfluss im Netzwerk wird wohl von den Tradern ausgehen, da diese immer über aktuelle Ereignisse informiert sein müssen sowie häufig und viele Trading-Aktionen auslösen. Die anderen Abteilungen haben einen geringen bis mittleren Bedarf an Internet und internen Daten, sowie Anspruch an eine latenzarme Telefonielösung.

\paragraph{Datacenter}
Das Datacenter hat einen, durch die zentrale Funktion bedingten, höheren Netzwerk- und Redundanzbedarf. Das Datacenter stellt zudem Internetdienste (wie E-Mail und Webseite) sowie Terminal- und Telefonieserver im internen Netz für das Headquarter und die Branches zur Verfügung, und bedarf deshalb ein sehr Ausfallsicheres Netzwerk.

\paragraph{Aussenstandorte}

Die Aussenstandorte, welche über die MPLS-Cloud angeschlossen sind, benötigen einen stabile und performante Anbindung an das Datacenter, da die Mitarbeiter in erster Linie auf den Terminal-Servern und internen Cloud-Diensten arbeiten.

\subsubsection{Application QoS Ansprüche}

Der Latenzzeit bei BetaHouse Inc. ist insbesondere bei den Highspeed-Tradern sowie der Telefonie Beachtung zu schenken. Beim Highspeed-Trading kann die Konkurrenz schon nach wenigen Milisekunden einen Vorteil erwirtschaften; dies kann zu grossen Verlusten führen.

Bei der Telefonie ist es wichtig, dass die Latenzzeit unter 200ms, wenn möglich aber unter 100ms Ende-zu-Ende-Latenz liegen soll.

Zum sicherstellen der obenstehenden Geschwindigkeiten muss auf allen Routern ein QoS auf das Trading-Netzwerk sowie auf SIP/RTP bzw. SIPS/RTPS eingerichtet werden.


\paragraph{Firmenwachstum}
Bei den Schätzungen der Firmengrösse sind wir von einem Wachstum von $10\%$ pro Jahr qua Mitarbeiterzahl bzw. benötigten Geräten ausgegangen. Dies bedeutet auf eine 5-Jahres-Frist ein Wachstum von ca. $160\%$.

\subsection{Campus LAN Design}

\subsubsection{Logische Netzwerkkarte}
%MUST cover WAN access
%MUST cover Internet access
%MUST cover reasoning for design
\subsubsection{Physische Netzwerkkarte}
%MUST cover reasoning for design

\subsubsection{Adressierungs- \& Namensschema}
\paragraph{IPv4}

Die internen IPv4 Adressen werden gemäss folgendem Schema aufgebaut: 

 \lstinline|10.<Standort>.<Abteilung>.0/24|
 
\begin{table}[h]
	\centering
  \begin{tabu}{l l}
  	\toprule 
  	Abteilung & Netzbereich \\
  	\midrule
  	IT & \lstinline|10.x.1.|\\
  	Trading & \lstinline|10.x.2.| \\
  	Banking & \lstinline|10.x.3.|\\
  	HR & \lstinline|10.x.4.|\\
	 	Gäste & \lstinline|10.x.5.|\\
	 	(Datacenter \& Routing) & \lstinline|10.x.200.|\\
	 	\bottomrule
  \end{tabu}
  \label{tbl:abteilung_ipv4_adressblock}
  \caption{Abteilung IPv4-Adressblock}
\end{table}

%TODO: VOIP?!
\begin{table}[h]
	\centering
	\begin{tabu}{l l}
		\toprule
		Standort & Netzbereich \\
		\midrule
		0. Floor & \lstinline|10.0.| \\
		1. Floor & \lstinline|10.1.| \\
		2. Floor & \lstinline|10.2.| \\
		3. Floor & \lstinline|10.3.| \\
		4. Floor & \lstinline|10.4.| \\
		Branch 1 & \lstinline|10.11.| \\
		Branch 2 & \lstinline|10.12.| \\
		Branch 3 & \lstinline|10.13.| \\
		Datacenter & \lstinline|10.200.| \\
		Datacenter DMZ & \lstinline|10.224.| \\
		\bottomrule
	\end{tabu}
	\caption{Standorte IPv4-Adressblock}
\end{table}

\paragraph{IPv6}

Die internen IPv6 Adressen werden gemäss folgendem Schema aufgebaut: 

\lstinline|<Provider-Prefix>:<Abteilung><Standort>:<autoconf-eui-64>|

\begin{table}[h]
	\centering
	\begin{tabu}{l l}
		\toprule 
		Abteilung & Netzbereich \\
		\midrule
		IT & \lstinline|01|\\
		Trading & \lstinline|02| \\
		Banking & \lstinline|03|\\
		HR & \lstinline|04|\\
		Gäste & \lstinline|05|\\
		(Datacenter \& Routing) & \lstinline|C8|\\
		\bottomrule
	\end{tabu}
	  \label{tbl:abteilung_ipv6_adressblock}
	\caption{Abteilung IPv6-Adressblock}
\end{table}

\begin{table}[h]
	\centering
	\begin{tabu}{l l}
		\toprule
		Standort & Netzbereich \\
		\midrule
		0. Floor & \lstinline|00| \\
		1. Floor & \lstinline|01| \\
		2. Floor & \lstinline|02| \\
		3. Floor & \lstinline|03| \\
		4. Floor & \lstinline|04| \\
		Branch 1 & \lstinline|0B| \\
		Branch 2 & \lstinline|0C| \\
		Branch 3 & \lstinline|0D| \\
		Datacenter & \lstinline|C8| \\
		\bottomrule
	\end{tabu}
	\caption{Standorte IPv6-Adressblock}
\end{table}

\subsection{Technologie \& Protokolle}
\subsubsection{Layer 2}
Wir verzichten auf STP, da wir für alle Bereiche eigene IP Subnetze verwenden. 

\subsubsection{Layer 3}
Für das Routing wird OSPF verwendet. 

\subsection{Benötigte Komponenten}
\subsubsection{Access Ports}
\begin{table}[h]
	\centering
	\begin{tabu} to \linewidth {l l l l l}
		\toprule 
		Location & Abteilung & Anz. Mitarbeiter & Anz. Drucker & Benötigte Access Ports \\
		\midrule
		HQ 1. Stock & Banking und Gäste & 150 & 15 & $150 + 15 + 1 = 166$ \\ 
		HQ 2. Stock & Banking & 150 & 15 & $150 + 15 = 165$ \\
		HQ 3. Stock & Trading & 30 & 3 & $2 \cdot 30 + 3 = 63$ \\ 
		HQ 4. Stock & IT und HR & $10 + 20 = 30$ & 3 & $30 + 3 = 33$\\
		Branch  & Banking & 20 & 2 & $20 + 2 = 22$\\
		\bottomrule 
	\end{tabu} 
	\label{tbl:require_access_ports}
	\caption{Benötigte Access Ports}
\end{table}

\subsection{Switches}
Wir setzen im gesamten Netzwerk Cisco Catalyst 3750-48TS mit je 48 Ports ein. Diese bieten die Möglichkeit die L3-Switches als Stack zu organisieren. Jeder Stack wird über einen eigenen logischen Hostnamen angesprochen. Um die hohe Verfügbarkeit für die Trading Abteilung zu garantieren, schliessen wir die VoIP Phone an einem separaten Access Port an. Die 30 Trader werden zu jede 15 Personen an einen L3 Switch angeschlossen. So bleiben bei einem Ausfall immer die Hälte der Trader voll operationsfähig. Um einen Ausfall möglichst zu vermeiden, sind alle Switches an einer USV angeschlossen. Da bei einem Ausfall der Switches in der Trading Abteilung grosse Kosten entstehen, hält sich die IT einen vorkonfigurierten Backup Switch in Ihrem Stockwerk. Damit kann im Notfall der Switch ohne grössere Zeitverluste ausgetauscht werden. Alle weiteren Abteilungen haben eine normale Wichtigkeit und werden gemäss ihrer Mitarbeiterzahl angeschlossen. Es wurde aber auch bei Ihnen ein Wachstum eingerechnet. Aus der Tabelle \ref{tbl:require_access_ports} folgt, dass folgende Switches angeschafft werden müssen. 
\begin{table}[h]
	\centering
	\begin{tabu} to \linewidth {l l l X X}
		\toprule 
		Bereich & Anzahl & Komponente & Hostname & Bemerkung \\
		\midrule
		Guest WLAN & 1x & IEEE 802.11ac Access Point & HQ\_AP\_1 & \\
		Banking HQ 1. floor & 4x & 48 Port Catalyst 3750-48TS & HQ\_AS\_1 & \\
		Banking HQ 2. floor & 4x & 48 Port Catalyst 3750-48TS & HQ\_AS\_2 & \\
		Trading HQ 3. floor & 2x & 48 Port Catalyst 3750-48TS & HQ\_AS\_3 & \\
		IT und HR HQ 4. floor & 1x & 48 Port Catalyst 3750-48TS & HQ\_AS\_4 & \\
		Branch 1 & 1x & 48 Port Catalyst 3750-48TS & BR1\_AS\_1 & \\
		Branch 2 & 1x & 48 Port Catalyst 3750-48TS & BR2\_AS\_2 & \\
		Branch 3 & 1x & 48 Port Catalyst 3750-48TS & BR3\_AS\_3 & \\
		\bottomrule 
	\end{tabu} 
	\caption{Benötigte Switches}
\end{table}

\section{WAN Design}

\subsection{Kundenansprüche an das Netzwerk}

\subsection{WAN Network Design}
%MUST cover remote locations, external services like web, mail
%MUST include security considerations

\subsubsection{Adressierungs- \& Namensschema}

\subsubsection{Logische Netzwerkkarte}
%MUST cover HQ and 3 Branch Offices
\subsubsection{Physische Netzwerkkarte}

\subsection{Technologie \& Protokolle}
\subsubsection{Layer 2}
\subsubsection{Layer 3}

\subsection{Benötigte Komponenten}

\section{Organisation IT-Applikationen}

\subsection{Positionierung Applikationsserver}

Um eine ausfallsichere und schnelle Applikations-Infrastruktur zu ermöglichen, empfiehlt es sich, die Applikationsserver in erster Linie im Datacenter aufzustellen. Dies vereinfacht die Wartung und z.B. Anschluss an ein redundantes Netzwerk \& USV. Für einige Applikationen (Domain-Controller, VoIP) kann zur Verbesserung der Redundanz oder Latenzzeiten ein zusätzliches Gerät bei allen grösseren Aussenstandorten aufgestellt werden.

Für das High-Frequency-Trading ist eine kurze Leitung und Latenzfreie Verbindung zur Börse unerlässlich. Aus diesen Gründen könnte es sich lohnen, einen Rechenzentrumsplatz nahe der Börse zu mieten bzw. diese Geräte über einen nahe an der Börse gelegenen Standort zu betreiben.

\begin{table}[h]
	\centering
	\begin{tabu} to \linewidth {l l}
		\toprule 
		Dienst & Standort(e) \\
		\midrule
		Domain Controller & Datacenter und Branches \\
		Mainfram for Banking-Application & Datacenter \\
		High Freuency Trading-Server & Datacenter oder Standort nahe Börse \\
		VoIP-Server & Datacenter sowie evtl. in Branches\\
		Backup Server & Datacenter \\
		\bottomrule 
	\end{tabu} 
	\label{tbl:server_standorte}
	\caption{Serverstandorte Netzwerk}
\end{table}

\subsection{Cloud Dienste}

Für den zukünftigen Ausbau in der Benutzung von Cloud-Infrastrukturen würde es sich empfehlen, Standorte mit vielen Mitarbeitern neu direkt an das Internet anzubinden, anstatt wie bisher über das Headquarter

Dies hätte mehrere Vorteile; zum einen würde das WAN-Netzwerk weniger belastet, zum anderen sinken Latenzzeiten und steigt der mögliche Netzwerkdurchsatz. Ein weitere Nachteil wäre, dass neu an mehreren Standorten Firewall-Geräte notwendig sind. Dies steigert Kosten und Komplexität in der Konfiguration \& Routing.


\input{appendix.tex}
